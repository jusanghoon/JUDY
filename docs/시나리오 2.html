<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>엔진 진단 시나리오: 연료 압력 부족</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc; 
            color: #334155; 
            padding: 1rem; 
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 1.5rem; 
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #0f769e; 
            margin-bottom: 1rem;
        }
        h1 { font-size: 1.75rem; font-weight: bold; text-align: center; } 
        h2 { font-size: 1.375rem; font-weight: bold; margin-top: 2rem; } 
        h3 { font-size: 1.125rem; font-weight: bold; } 
        
        .table-container { 
            width: 100%;
            overflow-x: auto; 
            -webkit-overflow-scrolling: touch; 
            margin-bottom: 1.5rem;
            border: 1px solid #e2e8f0; 
            border-radius: 0.375rem; 
        }
        table {
            width: 100%;
            table-layout: fixed; 
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #e2e8f0; 
            padding: 0.4rem; 
            text-align: left;
            font-size: 0.75rem; 
            white-space: normal; 
            word-break: break-word; 
        }
        th {
            background-color: #f1f5f9; 
            font-weight: 600;
        }
        
        th:nth-child(1), td:nth-child(1) { width: 35%; } 
        th:nth-child(2), td:nth-child(2) { width: 10%; } 
        th:nth-child(3), td:nth-child(3) { width: 27.5%; } 
        th:nth-child(4), td:nth-child(4) { width: 27.5%; } 

        .pid-description { 
            font-size: 0.7rem;
            color: #64748b; 
            display: block;
            margin-top: 0.1rem;
        }

        td.highlight { 
            font-weight: bold;
            color: #dc2626; 
        }
        .scenario-description, .quiz-section, .customer-complaint {
            background-color: #f0f9ff; 
            border: 1px solid #bae6fd; 
            padding: 1rem; 
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.875rem; 
            color: #374151; 
        }
        .customer-complaint h3 {
            color: #be123c; 
        }
        .quiz-section h3 {
            color: #0369a1; 
            margin-bottom: 1rem;
        }
        .quiz-options label {
            display: block;
            background-color: white;
            padding: 0.75rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 0.875rem;
        }
        .quiz-options label:hover {
            background-color: #f1f5f9;
        }
        .quiz-options input[type="radio"] {
            margin-right: 0.5rem;
        }
        .submit-button {
            display: inline-block;
            background-color: #0ea5e9; 
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .submit-button:hover {
            background-color: #0284c7; 
        }
        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            font-size: 0.875rem;
        }
        .feedback.correct {
            background-color: #d1fae5; 
            color: #065f46; 
            border: 1px solid #a7f3d0; 
        }
        .feedback.incorrect {
            background-color: #fee2e2; 
            color: #991b1b; 
            border: 1px solid #fecaca; 
        }
        .feedback-details {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            text-align: left;
        }
        .feedback-details strong {
            color: #047857; 
        }
         .feedback.incorrect .feedback-details strong {
            color: #b91c1c; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>엔진 진단 시나리오</h1>

        <h2>시나리오: 가속 시 출력 부족 및 간헐적 시동 지연</h2>
        <div class="scenario-description">
            <h3>시나리오 개요</h3>
            <p>차량은 정상 작동 온도로 예열되었으며, 고객은 주로 가속 시 힘이 부족하고 아침 첫 시동 시 간헐적으로 크랭킹 시간이 길어지는 증상을 호소합니다. 아래는 특정 주행 조건(예: 완만하게 가속 중)에서 관찰된 PID 데이터입니다.</p>
        </div>

        <div class="customer-complaint">
            <h3>고객 요청 사항</h3>
            <p>"정비사님, 차가 언덕길을 올라갈 때나 추월하려고 가속 페달을 밟으면 예전만큼 힘이 안 나요. 꾹 밟아도 차가 굼뜨게 나가는 느낌이랄까요? 그리고 가끔 아침에 시동 걸 때, 평소보다 '드르르릉' 하는 시간이 좀 길어졌어요. 매번 그런 건 아닌데, 신경 쓰이네요."</p>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>PID 항목 <span class="pid-description">(설명)</span></th>
                        <th>측정 단위</th>
                        <th>정상 가속 시 (예시 값)</th>
                        <th>이상 데이터 관찰 시 (가속 중) (예시 값)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>엔진 회전수 (RPM)</strong><span class="pid-description">엔진 크랭크축의 분당 회전수</span></td>
                        <td>RPM</td>
                        <td>2500 ~ 3500 (부드럽게 상승)</td>
                        <td>2800 (상승 더딤, 불안정)</td>
                    </tr>
                    <tr>
                        <td><strong>엔진 부하 (LOAD_ABSL)</strong><span class="pid-description">현재 엔진이 내고 있는 출력의 비율</span></td>
                        <td>%</td>
                        <td>60 ~ 80 (가속에 따라 상승)</td>
                        <td>50 (요구 부하 대비 낮음)</td>
                    </tr>
                    <tr>
                        <td><strong>단기 연료 보정 (SHRTFT1)</strong><span class="pid-description">실시간 공연비 조정을 위한 연료량 변화율</span></td>
                        <td>%</td>
                        <td>-5 ~ +5 (안정적)</td>
                        <td class="highlight">+15 ~ +25 (높게 유지)</td>
                    </tr>
                    <tr>
                        <td><strong>장기 연료 보정 (LONGFT1)</strong><span class="pid-description">학습된 공연비 조정을 위한 연료량 변화율</span></td>
                        <td>%</td>
                        <td>2</td>
                        <td class="highlight">+10 (높게 학습됨)</td>
                    </tr>
                    <tr>
                        <td><strong>산소 센서 값 (O2S11 또는 EQ_RAT11)</strong><span class="pid-description">배기가스 내 산소 농도 또는 공연비</span></td>
                        <td>전압(V) 또는 비율</td>
                        <td>0.7~0.9V (가속 시 농후) 또는 약 0.9</td>
                        <td class="highlight">0.1~0.3V (희박 상태 지속)</td>
                    </tr>
                    <tr>
                        <td><strong>흡기 매니폴드 압력 (MAP)</strong><span class="pid-description">흡기 다기관 내 절대 압력 (진공도)</span></td>
                        <td>kPa</td>
                        <td>70 ~ 90 (부하 따라 상승)</td>
                        <td>60 (부하 대비 낮음, 진공 높음)</td>
                    </tr>
                    <tr>
                        <td><strong>고압 연료 레일 압력 (FRP)</strong><span class="pid-description">직접 분사 연료 레일의 실제 압력</span></td>
                        <td>MPa (또는 kPa)</td>
                        <td>10 ~ 15 MPa (10000 ~ 15000 kPa)</td>
                        <td class="highlight">5 MPa (5000 kPa) (목표치보다 현저히 낮음)</td>
                    </tr>
                     <tr>
                        <td><strong>저압 연료 펌프 듀티 사이클 (FP%)</strong><span class="pid-description">저압 연료 펌프 작동률</span></td>
                        <td>%</td>
                        <td>40 ~ 60</td>
                        <td class="highlight">70 ~ 85 (최대치에 가깝게 작동)</td>
                    </tr>
                    <tr>
                        <td><strong>연료 분사 시간 (FUELPW1)</strong><span class="pid-description">연료 인젝터가 열려있는 시간 (ms)</span></td>
                        <td>ms</td>
                        <td>4.0 ~ 6.0 (부하 따라 증가)</td>
                        <td class="highlight">7.0 ~ 8.5 (과도하게 증가)</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="scenario-description">
            <h3>진단 및 추가 확인 사항</h3>
            <p>위 PID 값들의 변화는 엔진의 정상적인 연료 공급 과정에 문제가 있음을 시사합니다. 각 센서 값의 상호 관계와 고객의 요청 사항을 종합적으로 고려하여 문제의 원인을 추론해 보십시오. 특히 연료 압력과 관련된 데이터에 주목할 필요가 있습니다.</p>
        </div>

        <div class="quiz-section">
            <h3>문제: 위 PID 데이터와 고객 요청 사항을 바탕으로 이 차량의 가장 유력한 문제점은 무엇일까요?</h3>
            <div class="quiz-options" id="quizOptions">
                <label><input type="radio" name="diagnosis" value="a"> A. 점화 플러그 노후</label>
                <label><input type="radio" name="diagnosis" value="b"> B. 스로틀 바디 오염</label>
                <label><input type="radio" name="diagnosis" value="c"> C. 연료 압력 부족 (연료 펌프 또는 필터 문제)</label>
                <label><input type="radio" name="diagnosis" value="d"> D. 터보차저 액추에이터 고장</label>
                <label><input type="radio" name="diagnosis" value="e"> E. 산소 센서 고장 (희박 고정)</label>
            </div>
            <button class="submit-button" id="submitAnswer">답변 제출</button>
            <div class="feedback" id="feedbackMessage" style="display: none;"></div>
        </div>
    </div>

    <script>
        const submitButton = document.getElementById('submitAnswer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const quizOptions = document.getElementById('quizOptions');

        const correctScenarioExplanation = {
            frp_low: "고압 연료 레일 압력(FRP)이 목표치보다 현저히 낮게 유지되는 것은 연료 공급 시스템에 문제가 있음을 나타내는 가장 직접적인 증거입니다. 이로 인해 인젝터가 충분한 연료를 분사하지 못합니다.",
            fp_duty_high: "저압 연료 펌프(FP)의 작동률(듀티 사이클)이 최대치에 가깝게 매우 높다는 것은, PCM이 연료 압력을 높이기 위해 펌프를 최대한 가동시키고 있지만 압력이 충분히 형성되지 않고 있음을 의미합니다.",
            fuelpw1_high: "PCM은 부족한 연료 압력을 보상하고 목표 공연비를 맞추기 위해 인젝터의 분사 시간(FUELPW1)을 비정상적으로 길게 가져가려고 시도합니다.",
            shrtft_longft_high: "실제 분사되는 연료량이 부족하여 혼합비가 희박해지므로, 산소 센서는 희박 상태를 감지하고 PCM은 연료 보정 값(SHRTFT1, LONGFT1)을 플러스(+)로 크게 올려 연료를 더 많이 공급하려고 합니다.",
            o2s11_lean: "연료 공급이 부족하여 실제 공연비가 희박한 상태가 지속되므로, 산소 센서 값은 희박(낮은 전압 또는 높은 공연비 값)을 나타냅니다.",
            rpm_hesitation_load_low: "연료 공급이 부족하면 엔진이 충분한 힘을 내지 못해 RPM 상승이 더디고 불안정하며, 실제 엔진 부하(LOAD_ABSL)도 운전자의 가속 의도에 미치지 못하게 됩니다. 이는 고객이 호소하는 가속 시 출력 부족 증상과 일치합니다."
        };

        submitButton.addEventListener('click', () => {
            const selectedOption = quizOptions.querySelector('input[name="diagnosis"]:checked');
            feedbackMessage.style.display = 'none'; 
            feedbackMessage.innerHTML = ''; 

            if (!selectedOption) {
                feedbackMessage.textContent = "보기를 선택해주세요!";
                feedbackMessage.className = 'feedback incorrect'; 
                feedbackMessage.style.display = 'block';
                return;
            }
            
            const userAnswer = selectedOption.value;
            const correctAnswer = 'c'; 

            if (userAnswer === correctAnswer) {
                let explanationHTML = "<strong>정답입니다! PID 데이터를 정확히 분석하셨네요.</strong><div class='feedback-details'>주요 단서는 다음과 같습니다:<br><br>";
                explanationHTML += `<strong>고압 연료 레일 압력 (FRP) 낮음:</strong> ${correctScenarioExplanation.frp_low}<br><br>`;
                explanationHTML += `<strong>저압 연료 펌프 듀티 사이클 (FP%) 높음:</strong> ${correctScenarioExplanation.fp_duty_high}<br><br>`;
                explanationHTML += `<strong>연료 분사 시간 (FUELPW1) 과도하게 증가:</strong> ${correctScenarioExplanation.fuelpw1_high}<br><br>`;
                explanationHTML += `<strong>단기/장기 연료 보정 값 높음 (플러스 방향):</strong> ${correctScenarioExplanation.shrtft_longft_high}<br><br>`;
                explanationHTML += `<strong>산소 센서 값 희박 상태 지속:</strong> ${correctScenarioExplanation.o2s11_lean}<br><br>`;
                explanationHTML += `<strong>RPM 상승 더딤 및 엔진 부하 낮음:</strong> ${correctScenarioExplanation.rpm_hesitation_load_low}<br><br>`;
                explanationHTML += `이러한 증상들은 종합적으로 연료 공급 계통(예: 연료 펌프 약화, 연료 필터 막힘, 연료 라인 누설 등)의 문제로 인해 실제 연료 압력이 부족한 상황을 나타냅니다. 고객이 언급한 가속 시 출력 부족 및 간헐적 시동 지연 증상과도 일치합니다.</div>`;
                feedbackMessage.innerHTML = explanationHTML;
                feedbackMessage.className = 'feedback correct';
            } else {
                let explanation = "<strong>오답입니다. 다시 한번 PID 데이터를 살펴보세요.</strong><div class='feedback-details'>";
                if (userAnswer === 'a') {
                    explanation += "<strong>A. 점화 플러그 노후 선택:</strong> 점화 플러그가 노후되면 실화(Misfire)가 발생할 수 있고, 이는 특정 실린더의 출력 저하(CYL_ACCL 값 이상)와 엔진 부조를 유발합니다. 연료 보정 값은 변동할 수 있지만, 이 시나리오처럼 FRP 값이 직접적으로 낮아지거나 FP 듀티 사이클이 과도하게 높아지는 현상과는 거리가 멉니다.";
                } else if (userAnswer === 'b') {
                    explanation += "<strong>B. 스로틀 바디 오염 선택:</strong> 스로틀 바디가 심하게 오염되면 공회전 RPM이 불안정하거나 가속 페달 반응이 늦어질 수 있습니다. 하지만 이로 인해 연료 압력(FRP)이 직접적으로 낮아지거나 연료 펌프(FP)가 과도하게 작동하지는 않으며, 연료 보정 값의 패턴도 다를 가능성이 높습니다.";
                } else if (userAnswer === 'd') {
                    explanation += "<strong>D. 터보차저 액추에이터 고장 선택:</strong> 터보차저 액추에이터(예: 웨이스트게이트)가 고장나면 부스트 압력이 제대로 형성되지 않아 출력이 저하될 수 있습니다. 이 경우 MAP 센서나 TCBP 센서 값이 정상보다 낮게 나올 수 있지만, 연료 압력(FRP) 자체가 낮아지거나 연료 펌프(FP)가 과부하 상태를 보이는 것과는 직접적인 연관성이 적습니다. 연료 보정은 희박 쪽으로 갈 수 있으나 FRP 저하가 주된 증상은 아닙니다.";
                } else if (userAnswer === 'e') {
                    explanation += "<strong>E. 산소 센서 고장 (희박 고정) 선택:</strong> 산소 센서가 희박 상태로 고착되어 잘못된 신호를 보내면, PCM은 실제로 혼합비가 정상임에도 불구하고 연료를 과도하게 분사하려고 할 수 있습니다 (연료 보정 값 상승, 연료 분사 시간 증가). 하지만 이 경우 실제 연료 압력(FRP)이 낮아지거나 연료 펌프(FP)가 과도하게 작동할 직접적인 이유는 없습니다. 오히려 연료가 과다 공급되어 농후 상태가 될 수 있습니다.";
                }
                explanation += "<br><br><strong>힌트:</strong> 고객의 증상(가속 시 출력 부족, 간헐적 시동 지연)과 함께, 특히 낮은 연료 레일 압력(FRP), 매우 높은 연료 펌프 작동률(FP%), 그리고 이를 보상하려는 듯한 높은 연료 보정 값들과 긴 연료 분사 시간에 주목해보세요. 이는 엔진이 '배고픈' 상태임을 시사합니다.</div>";
                feedbackMessage.innerHTML = explanation;
                feedbackMessage.className = 'feedback incorrect';
            }
            feedbackMessage.style.display = 'block';
        });
    </script>

</body>
</html>
